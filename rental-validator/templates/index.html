<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Return Photo Validator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
        }
        .status-valid {
            color: green;
            font-weight: bold;
        }
        .status-invalid {
            color: red;
            font-weight: bold;
        }
        .status-uncertain {
            color: orange;
            font-weight: bold;
        }
        .result-box {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .nav-tabs .nav-link {
            cursor: pointer;
        }
        .damage-highlight {
            border: 3px solid red;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="my-4 text-center">Rental Return Photo Validator</h1>
        
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="validate-tab" data-bs-toggle="tab" data-bs-target="#validate" type="button" role="tab">Validate Photos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="compare-tab" data-bs-toggle="tab" data-bs-target="#compare" type="button" role="tab">Compare Photos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="review-tab" data-bs-toggle="tab" data-bs-target="#review" type="button" role="tab">Review Uncertain</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="train-tab" data-bs-toggle="tab" data-bs-target="#train" type="button" role="tab">Train Model</button>
            </li>
        </ul>
        
        <div class="tab-content" id="myTabContent">
            <!-- Validate Photos Tab -->
            <div class="tab-pane fade show active" id="validate" role="tabpanel">
                <div class="row my-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>Upload Return Photos</h5>
                            </div>
                            <div class="card-body">
                                <form id="validate-form" enctype="multipart/form-data">
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label for="front" class="form-label">Front Photo</label>
                                            <input type="file" class="form-control" id="front" name="front" accept="image/*" required>
                                            <div id="front-preview"></div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="back" class="form-label">Back Photo</label>
                                            <input type="file" class="form-control" id="back" name="back" accept="image/*" required>
                                            <div id="back-preview"></div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="left_side" class="form-label">Left Side Photo</label>
                                            <input type="file" class="form-control" id="left_side" name="left_side" accept="image/*" required>
                                            <div id="left_side-preview"></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label for="right_side" class="form-label">Right Side Photo</label>
                                            <input type="file" class="form-control" id="right_side" name="right_side" accept="image/*" required>
                                            <div id="right_side-preview"></div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="fuel_gauge" class="form-label">Fuel Gauge Photo</label>
                                            <input type="file" class="form-control" id="fuel_gauge" name="fuel_gauge" accept="image/*" required>
                                            <div id="fuel_gauge-preview"></div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Validate Photos</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="validation-results" class="result-box d-none">
                    <h4>Validation Results</h4>
                    <div id="results-content"></div>
                </div>
            </div>
            
            <!-- Compare Photos Tab -->
            <div class="tab-pane fade" id="compare" role="tabpanel">
                <div class="row my-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>Compare Before/After Photos</h5>
                            </div>
                            <div class="card-body">
                                <form id="compare-form" enctype="multipart/form-data">
                                    <div class="row">
                                        <div class="col-md-5 mb-3">
                                            <label for="before" class="form-label">Before Photo</label>
                                            <input type="file" class="form-control" id="before" name="before" accept="image/*" required>
                                            <div id="before-preview"></div>
                                        </div>
                                        <div class="col-md-5 mb-3">
                                            <label for="after" class="form-label">After Photo</label>
                                            <input type="file" class="form-control" id="after" name="after" accept="image/*" required>
                                            <div id="after-preview"></div>
                                        </div>
                                        <div class="col-md-2 mb-3">
                                            <label for="category" class="form-label">Photo Type</label>
                                            <select class="form-select" id="category" name="category" required>
                                                <option value="front">Front</option>
                                                <option value="back">Back</option>
                                                <option value="left_side">Left Side</option>
                                                <option value="right_side">Right Side</option>
                                                <option value="fuel_gauge">Fuel Gauge</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Compare Photos</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="comparison-results" class="result-box d-none">
                    <h4>Damage Detection Results</h4>
                    <div id="comparison-content"></div>
                </div>
            </div>
            
            <!-- Review Uncertain Tab -->
            <div class="tab-pane fade" id="review" role="tabpanel">
                <div class="row my-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>Review Uncertain Samples</h5>
                                <button id="load-uncertain" class="btn btn-primary btn-sm mt-2">Load Uncertain Samples</button>
                            </div>
                            <div class="card-body">
                                <div id="uncertain-samples"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Train Model Tab -->
            <div class="tab-pane fade" id="train" role="tabpanel">
                <div class="row my-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>Train Model</h5>
                            </div>
                            <div class="card-body">
                                <form id="train-form">
                                    <div class="mb-3">
                                        <label for="data_dir" class="form-label">Data Directory</label>
                                        <input type="text" class="form-control" id="data_dir" name